<html>
<head>
    <meta charset="UTF-8">
    <title>Online Shopping</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
    <style>
        .cards{
            text-align: center;
        }

        #cart{
            text-align: center;
            display: inline-block;
            gap: 1000px;
        }

        ul{
            list-style: none;
            display: flex;
            flex-flow: row wrap;
            justify-content: space-evenly;
            flex-wrap: wrap;
            align-items: center;
            padding-left: 0;
        }

    </style>

</head>
<body>
<div id="main">
    <h1><p style="text-align:center;">Amazing Shop<i class='fab fa-cc-amazon-pay' style='font-size:48px;color:red'></i>
    </p></h1>
    <h4><p style="text-align:center;">Get free home delivery in 24 hour on order above 10000INR</p></h4>
    <ul>
        <div id="myData"></div>
    </ul>

    <h3><p style="text-align:center;">My Cart<i class="fa fa-shopping-cart" style="font-size:24px"></i></p></h3>

    <ul>
        <div id="cart">
        </div>
    </ul>
</div>
</body>
<script>
            function createProduct(data) {

                let product = document.createElement('h4');
                product.className = "cards";
                product.style = "float: left; width: 160px";

                let index = document.createElement('div');
                index.style = "text-align: center;"
                index.innerText = data.id;

                let title = document.createElement('div');
                title.innerText = data.product;

                let price = document.createElement('div');
                price.innerText = "Price: " + data.price;

                let a = document.createElement('a');
                a.href = "/add/" + data.id;
                a.innerText = "Cart Item";

                product.appendChild(index);
                product.appendChild(title);
                product.appendChild(price);
                product.appendChild(a);

                console.log(product)

                return product
            }

            data = %(data)s
            cartData = %(cartData)s

            var dataContainer = document.getElementById("myData");
            var myCartContainer = document.getElementById("cart");
            console.log(data.length);

            for (var i=0; i<data.length; i++) {

                let product = this.createProduct(data[i])
                dataContainer.appendChild(product);

                if (cartData && data[i].id in cartData) {
                    let div = document.createElement('div');
                    div.innerText = data[i].product + "\n Price:" + data[i].price

                    let a = document.createElement('a');
                    a.href = "/remove/" + data[i].id
                    a.innerHTML = "<button>Remove from Cart</button><br><br>"

                    myCartContainer.appendChild(div);
                    myCartContainer.appendChild(a);
                }
            }

</script>
</html>